###########################################
##                WARNING                ##
###########################################
#                                         #
#  This file is managed by iEdon PeerAPI. #
#                                         #
#  DO NOT EDIT OR DELETE THIS FILE IF YOU #
#  ARE NOT SURE.                          #
###########################################

protocol bgp {{ .SessionName }} from dnpeers {
    direct;
    neighbor {{ .InterfaceAddr }} as {{ .ASN }};
    ipv4 {
        {{- if .IPv4ShouldImport }}
        import where import_filter_ebgp({{.FilterParams}});
        {{- else }}
        import none;
        {{- end }}

        {{- if .IPv4ShouldExport }}
        export where export_filter_ebgp({{.FilterParams}});
        {{- else }}
        export none;
        {{- end }}

        import limit BGP_ROUTES_IMPORT_LIMIT action block;
        {{- if .ExtendedNextHopOn }}
        extended next hop on;
        {{- end }}
    };
    ipv6 {
        {{- if .IPv6ShouldImport }}
        import where import_filter_ebgp({{.FilterParams}});
        {{- else }}
        import none;
        {{- end }}

        {{- if .IPv6ShouldExport }}
        export where export_filter_ebgp({{.FilterParams}});
        {{- else }}
        export none;
        {{- end }}

        import limit BGP_ROUTES_IMPORT_LIMIT action block;
        {{- if .ExtendedNextHopOn }}
        extended next hop on;
        {{- end }}
    };
};
